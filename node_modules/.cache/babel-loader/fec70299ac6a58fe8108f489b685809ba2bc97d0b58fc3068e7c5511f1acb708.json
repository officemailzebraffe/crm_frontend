{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/api';\n\n// Async thunks\nexport const fetchProjects = createAsyncThunk('projects/fetchProjects', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.get('/projects');\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const createProject = createAsyncThunk('projects/createProject', async (projectData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.post('/projects', projectData);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const updateProject = createAsyncThunk('projects/updateProject', async ({\n  id,\n  data\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await api.put(`/projects/${id}`, data);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nexport const deleteProject = createAsyncThunk('projects/deleteProject', async (id, {\n  rejectWithValue\n}) => {\n  try {\n    await api.delete(`/projects/${id}`);\n    return id;\n  } catch (error) {\n    return rejectWithValue(error.response.data);\n  }\n});\nconst projectSlice = createSlice({\n  name: 'projects',\n  initialState: {\n    projects: [],\n    currentProject: null,\n    loading: false,\n    error: null\n  },\n  reducers: {\n    setCurrentProject: (state, action) => {\n      state.currentProject = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchProjects.pending, state => {\n      state.loading = true;\n    }).addCase(fetchProjects.fulfilled, (state, action) => {\n      state.loading = false;\n      state.projects = action.payload.data;\n    }).addCase(fetchProjects.rejected, (state, action) => {\n      var _action$payload;\n      state.loading = false;\n      state.error = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.error;\n    }).addCase(createProject.fulfilled, (state, action) => {\n      state.projects.push(action.payload.data);\n    }).addCase(updateProject.fulfilled, (state, action) => {\n      const index = state.projects.findIndex(p => p._id === action.payload.data._id);\n      if (index !== -1) {\n        state.projects[index] = action.payload.data;\n      }\n    }).addCase(deleteProject.fulfilled, (state, action) => {\n      state.projects = state.projects.filter(p => p._id !== action.payload);\n    });\n  }\n});\nexport const {\n  setCurrentProject\n} = projectSlice.actions;\nexport default projectSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","fetchProjects","_","rejectWithValue","response","get","data","error","createProject","projectData","post","updateProject","id","put","deleteProject","delete","projectSlice","name","initialState","projects","currentProject","loading","reducers","setCurrentProject","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","rejected","_action$payload","push","index","findIndex","p","_id","filter","actions","reducer"],"sources":["/home/pranjal/Pranjal/vscode/crm_portal/client/src/redux/slices/projectSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/api';\n\n// Async thunks\nexport const fetchProjects = createAsyncThunk(\n  'projects/fetchProjects',\n  async (_, { rejectWithValue }) => {\n    try {\n      const response = await api.get('/projects');\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nexport const createProject = createAsyncThunk(\n  'projects/createProject',\n  async (projectData, { rejectWithValue }) => {\n    try {\n      const response = await api.post('/projects', projectData);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nexport const updateProject = createAsyncThunk(\n  'projects/updateProject',\n  async ({ id, data }, { rejectWithValue }) => {\n    try {\n      const response = await api.put(`/projects/${id}`, data);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nexport const deleteProject = createAsyncThunk(\n  'projects/deleteProject',\n  async (id, { rejectWithValue }) => {\n    try {\n      await api.delete(`/projects/${id}`);\n      return id;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nconst projectSlice = createSlice({\n  name: 'projects',\n  initialState: {\n    projects: [],\n    currentProject: null,\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    setCurrentProject: (state, action) => {\n      state.currentProject = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchProjects.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(fetchProjects.fulfilled, (state, action) => {\n        state.loading = false;\n        state.projects = action.payload.data;\n      })\n      .addCase(fetchProjects.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload?.error;\n      })\n      .addCase(createProject.fulfilled, (state, action) => {\n        state.projects.push(action.payload.data);\n      })\n      .addCase(updateProject.fulfilled, (state, action) => {\n        const index = state.projects.findIndex((p) => p._id === action.payload.data._id);\n        if (index !== -1) {\n          state.projects[index] = action.payload.data;\n        }\n      })\n      .addCase(deleteProject.fulfilled, (state, action) => {\n        state.projects = state.projects.filter((p) => p._id !== action.payload);\n      });\n  },\n});\n\nexport const { setCurrentProject } = projectSlice.actions;\nexport default projectSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}