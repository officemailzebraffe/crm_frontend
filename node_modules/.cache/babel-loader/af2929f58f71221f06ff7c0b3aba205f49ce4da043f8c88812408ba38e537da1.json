{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import api from'../../utils/api';// Async thunks\nexport const fetchProjects=createAsyncThunk('projects/fetchProjects',async(_,_ref)=>{let{rejectWithValue}=_ref;try{const response=await api.get('/projects');return response.data;}catch(error){return rejectWithValue(error.response.data);}});export const createProject=createAsyncThunk('projects/createProject',async(projectData,_ref2)=>{let{rejectWithValue}=_ref2;try{const response=await api.post('/projects',projectData);return response.data;}catch(error){return rejectWithValue(error.response.data);}});export const updateProject=createAsyncThunk('projects/updateProject',async(_ref3,_ref4)=>{let{id,data}=_ref3;let{rejectWithValue}=_ref4;try{const response=await api.put(\"/projects/\".concat(id),data);return response.data;}catch(error){return rejectWithValue(error.response.data);}});export const deleteProject=createAsyncThunk('projects/deleteProject',async(id,_ref5)=>{let{rejectWithValue}=_ref5;try{await api.delete(\"/projects/\".concat(id));return id;}catch(error){return rejectWithValue(error.response.data);}});const projectSlice=createSlice({name:'projects',initialState:{projects:[],currentProject:null,loading:false,error:null},reducers:{setCurrentProject:(state,action)=>{state.currentProject=action.payload;}},extraReducers:builder=>{builder.addCase(fetchProjects.pending,state=>{state.loading=true;}).addCase(fetchProjects.fulfilled,(state,action)=>{state.loading=false;state.projects=action.payload.data;}).addCase(fetchProjects.rejected,(state,action)=>{var _action$payload;state.loading=false;state.error=(_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.error;}).addCase(createProject.fulfilled,(state,action)=>{state.projects.push(action.payload.data);}).addCase(updateProject.fulfilled,(state,action)=>{const index=state.projects.findIndex(p=>p._id===action.payload.data._id);if(index!==-1){state.projects[index]=action.payload.data;}}).addCase(deleteProject.fulfilled,(state,action)=>{state.projects=state.projects.filter(p=>p._id!==action.payload);});}});export const{setCurrentProject}=projectSlice.actions;export default projectSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","fetchProjects","_","_ref","rejectWithValue","response","get","data","error","createProject","projectData","_ref2","post","updateProject","_ref3","_ref4","id","put","concat","deleteProject","_ref5","delete","projectSlice","name","initialState","projects","currentProject","loading","reducers","setCurrentProject","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","rejected","_action$payload","push","index","findIndex","p","_id","filter","actions","reducer"],"sources":["/home/pranjal/Pranjal/vscode/crm_portal/client/src/redux/slices/projectSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../utils/api';\n\n// Async thunks\nexport const fetchProjects = createAsyncThunk(\n  'projects/fetchProjects',\n  async (_, { rejectWithValue }) => {\n    try {\n      const response = await api.get('/projects');\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nexport const createProject = createAsyncThunk(\n  'projects/createProject',\n  async (projectData, { rejectWithValue }) => {\n    try {\n      const response = await api.post('/projects', projectData);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nexport const updateProject = createAsyncThunk(\n  'projects/updateProject',\n  async ({ id, data }, { rejectWithValue }) => {\n    try {\n      const response = await api.put(`/projects/${id}`, data);\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nexport const deleteProject = createAsyncThunk(\n  'projects/deleteProject',\n  async (id, { rejectWithValue }) => {\n    try {\n      await api.delete(`/projects/${id}`);\n      return id;\n    } catch (error) {\n      return rejectWithValue(error.response.data);\n    }\n  }\n);\n\nconst projectSlice = createSlice({\n  name: 'projects',\n  initialState: {\n    projects: [],\n    currentProject: null,\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    setCurrentProject: (state, action) => {\n      state.currentProject = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchProjects.pending, (state) => {\n        state.loading = true;\n      })\n      .addCase(fetchProjects.fulfilled, (state, action) => {\n        state.loading = false;\n        state.projects = action.payload.data;\n      })\n      .addCase(fetchProjects.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload?.error;\n      })\n      .addCase(createProject.fulfilled, (state, action) => {\n        state.projects.push(action.payload.data);\n      })\n      .addCase(updateProject.fulfilled, (state, action) => {\n        const index = state.projects.findIndex((p) => p._id === action.payload.data._id);\n        if (index !== -1) {\n          state.projects[index] = action.payload.data;\n        }\n      })\n      .addCase(deleteProject.fulfilled, (state, action) => {\n        state.projects = state.projects.filter((p) => p._id !== action.payload);\n      });\n  },\n});\n\nexport const { setCurrentProject } = projectSlice.actions;\nexport default projectSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}